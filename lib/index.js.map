{"version":3,"sources":["../src/index.js"],"names":["plus","minus","ride","sum","isFloat","num","test","toString","getDismantling","inputNum","left","right","length","isMinus","inputNumFormat","n1Str","split","parseInt","dismantle","n1","n2","Error","num1","num2","Math","pow","left1","left2","right1","right2","max","getFloat","radix","parseFloat","floor","l1","abs","l2","r1","r2","back","arr","reduce","acc","cur"],"mappings":"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","file":"index.js","sourcesContent":["function isFloat(num) {\n  return /^[0-9]+.[0-9]+$/.test(num.toString());\n}\n\nfunction getDismantling(inputNum) {\n  let left = 0,\n    right = 0,\n    length = 0,\n    isMinus = inputNum < 0;\n  const inputNumFormat = isMinus ? -inputNum : inputNum;\n  if (isFloat(inputNumFormat)) {\n    let n1Str = inputNumFormat.toString().split(\".\");\n    left = parseInt(n1Str[0]);\n    right = parseInt(n1Str[1] || \"0\");\n    length = n1Str[1] ? n1Str[1].length : 0;\n  } else {\n    left = inputNumFormat;\n  }\n  return {\n    left: isMinus ? -left : left,\n    right: isMinus ? -right : right,\n    length,\n  };\n}\n\nfunction dismantle(n1, n2) {\n  if (!(typeof n1 == \"number\" && typeof n2 == \"number\")) {\n    throw new Error(\"The input parameter errors!\");\n  }\n\n  const num1 = getDismantling(n1);\n  const num2 = getDismantling(n2);\n\n  if (num1.length > num2.length) {\n    num2.right *= Math.pow(10, num1.length - num2.length);\n  } else if (num1.length < num2.length) {\n    num1.right *= Math.pow(10, num2.length - num1.length);\n  }\n  return {\n    left1: num1.left,\n    left2: num2.left,\n    right1: num1.right,\n    right2: num2.right,\n    num: Math.max(num1.length, num2.length),\n  };\n}\n\nfunction getFloat(num, length) {\n  const radix = Math.pow(10, length);\n  return parseFloat(`${parseInt(num / radix)}.${num % radix}`);\n}\n\n/**\n * 四则运算：加\n * @param {number} n1\n * @param {number} n2\n */\nexport function plus(n1, n2) {\n  if (n1 === 0) {\n    return n2;\n  }\n  if (n2 === 0) {\n    return n1;\n  }\n  const { left1, left2, right1, right2, num } = dismantle(n1, n2);\n  let left = left1 + left2,\n    right = right1 + right2,\n    radix = Math.pow(10, num);\n  if (left >= 0 && right >= 0) {\n    return parseFloat(`${left + Math.floor(right / radix)}.${right % radix}`);\n  } else if (left >= 0 && right < 0) {\n    if (left == 0) {\n      return parseFloat(`-0.${-right}`);\n    } else {\n      return parseFloat(`${left - 1}.${right + radix}`);\n    }\n  } else if (left < 0 && right < 0) {\n    return parseFloat(`-${-left + Math.floor(-right / radix)}.${-right % radix}`);\n  } else if (left < 0 && right >= 0) {\n    if (right == 0) {\n      return left;\n    } else {\n      return parseFloat(`${left < -1 ? \"\" : \"-\"}${left + 1}.${radix - right}`);\n    }\n  }\n}\n\n/**\n * 四则运算：减\n * @param {number} n1\n * @param {number} n2\n */\nexport function minus(n1, n2) {\n  return plus(n1, -n2);\n}\n\nexport function ride(n1, n2) {\n  const { left1, left2, right1, right2, num } = dismantle(n1, n2);\n\n  const l1 = Math.abs(left1),\n    l2 = Math.abs(left2),\n    r1 = Math.abs(right1),\n    r2 = Math.abs(right2);\n\n  const back = plus(\n    plus(l1 * l2, getFloat(l1 * r2, num)),\n    plus(getFloat(l2 * r1, num), getFloat(r1 * r2, num * num))\n  );\n\n  if ((n1 < 0 && n2 > 0) || (n1 > 0 && n2 < 0)) {\n    return -back;\n  } else {\n    return back;\n  }\n}\n\n/**\n * 求和\n * @param {Array} arr\n *\n * @return {number}\n */\nexport function sum(arr) {\n  return arr.reduce((acc, cur) => plus(acc, cur), 0);\n}\n\nexport default {\n  plus,\n  minus,\n  ride,\n  sum,\n};\n"]}